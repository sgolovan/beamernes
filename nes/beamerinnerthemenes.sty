%% beamerinnerthemenes.sty --
%%
%% The New Economic School beamer inner theme
%%
%% Copyright 2020-2024 Sergei Golovan
%%
%% The code is derived from the Metropolis theme,
%% Copyright 2015 Matthias Vogelgesang and the LaTeX community
%%
%% This work is licensed under a Creative Commons Attribution-ShareAlike 4.0
%% International License (https://creativecommons.org/licenses/by-sa/4.0/).
%%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamerinnerthemenes}[2024/05/02 New Economic School inner theme]
\RequirePackage{pgfopts}
\RequirePackage{neslogo}
\RequirePackage{setspace}

\useinnertheme{metropolis}
\setbeamertemplate{blocks}[rounded]

\def\inserttitlegraphic{\hbox to\textwidth{%
  \ifnes@logo
    \neslogo[palette=\nes@biglogopalette,
             color=\nes@biglogocolor,
             size=1.5cm,
             lang=\nes@logo@lang]%
  \else\hbox{}\fi\hss}%
}

\setbeamertemplate{title graphic}{
  \vbox {
    \vspace*{1em}
    \inserttitlegraphic%
  }%
  \vspace*{-1.5em}
  \nointerlineskip%
}

\setbeamertemplate{title}{
  \rightskip=0cm plus 1fill
  \setstretch{0.8}%
  \inserttitle
  \par
  \vspace*{0.2em}%
}
\setbeamertemplate{author}{
  \vspace*{1em}
  \insertauthor
  \par
}
\setbeamertemplate{date}{
  \ifx\beamer@shortauthor\@empty\vspace*{1em}\else\vspace*{0.5em}\fi
  \insertdate
  \par
}
\setbeamertemplate{institute}{
  \ifx\beamer@shortauthor\@empty
    \ifx\insertdate\@empty
      \vspace*{1em}%
    \else
      \vspace*{0.7em}%
    \fi
  \else
    \vspace*{0.7em}%
  \fi
  \insertinstitute%
  \par%
}
\define@key{beamerframe}{c}[true]{% centered
  \beamer@frametopskip=2ex plus 1fill
  \beamer@framebottomskip=0pt plus 1fill
  \beamer@frametopskipautobreak=2ex plus .4\paperheight
  \beamer@framebottomskipautobreak=0pt plus .6\paperheight
  \def\beamer@initfirstlineunskip{}%
}

% Empty at the moment
\newcommand{\nes@inner@setdefaults}{}

\nes@inner@setdefaults
\ProcessPgfPackageOptions{/metropolis/inner}
\endinput

%% End of beamerinnerthemenes.sty
